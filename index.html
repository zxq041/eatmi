<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>eatmi.pl â€” ZamÃ³w boxy i kanapki online</title>
  <meta name="description" content="eatmi.pl â€” ZamÃ³w boxy Å›niadaniowe, boxy lunchowe, kanapki, saÅ‚atki, desery i napoje online." />
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="manifest" href="/manifest.webmanifest">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              yellow: '#FFC107',
              dark: '#111827',
              light: '#F9FAFB'
            }
          },
          boxShadow: {
            soft: '0 10px 30px rgba(0,0,0,.08)',
            glass: '0 8px 25px rgba(0,0,0,.12)'
          },
          borderRadius: { xl2: '1.25rem' }
        }
      }
    }
  </script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    html{scroll-behavior:smooth}
    .glass{background:rgba(255,255,255,0.6);backdrop-filter:blur(10px)}
    .neo{box-shadow: 10px 10px 30px rgba(0,0,0,.08), -10px -10px 30px rgba(255,255,255,.7)}
    .liquid{background:linear-gradient(135deg, rgba(255,255,255,.6), rgba(255,255,255,.35)); backdrop-filter: blur(12px);}
    .drag-hover{outline:2px dashed #11182733; outline-offset: -8px}

    @keyframes logo-glow {
      0%,100% { box-shadow: 0 0 0 0 rgba(255,193,7,0.0); }
      50% { box-shadow: 0 0 0 8px rgba(255,193,7,0.35); }
    }
    .logo-glow { animation: logo-glow 3s ease-in-out infinite; }

    @keyframes toast-enter {
      0% { opacity: 0; transform: translateY(16px) scale(0.96); }
      60% { opacity: 1; transform: translateY(0) scale(1.02); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }

    @keyframes toast-progress { from { width: 100%; } to { width: 0%; } }
    .toast-enter { animation: toast-enter 0.35s ease-out forwards; }
    .toast-bar { animation: toast-progress 2.5s linear forwards; }
  </style>
</head>
<body class="bg-brand-light text-gray-900">
  <div id="topBar" class="w-full text-center text-sm bg-brand-yellow text-gray-900 py-1.5 font-medium">
    <span>ðŸŽ‰ DziÅ› âˆ’15% z kodem <b>HAPPY15</b> do 15:00</span>
  </div>

  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    const PRODUCT_CATEGORIES = [
      { id: 'boxy-sniadaniowe', name: 'Boxy Å›niadaniowe', icon: 'package-open', description: 'Gotowe zestawy Å›niadaniowe w trzech rozmiarach.' },
      { id: 'boxy-lunchowe', name: 'Boxy lunchowe', icon: 'utensils-crossed', description: 'Syte boxy lunchowe idealne na przerwÄ™ w pracy.' },
      { id: 'kanapki', name: 'Kanapki', icon: 'sandwich', description: 'ÅšwieÅ¼e kanapki na ciepÅ‚o i na zimno.' },
      { id: 'salatki', name: 'SaÅ‚atki', icon: 'leaf', description: 'Lekkie i sycÄ…ce saÅ‚atki.' },
      { id: 'desery', name: 'Desery', icon: 'ice-cream', description: 'SÅ‚odkie zakoÅ„czenie Twojego zamÃ³wienia.' },
      { id: 'napoje', name: 'Napoje', icon: 'cup-soda', description: 'Zimne napoje, soki i kawy mroÅ¼one.' },
    ];

    const BREAKFAST_PRODUCTS = [
      { id:'bs-klasyk-s',  name:'Box Å›niadaniowy Klasyk â€” maÅ‚y',   price: 29, subtitle:'BuÅ‚ka, jajko, ser, warzywa' },
      { id:'bs-klasyk-m',  name:'Box Å›niadaniowy Klasyk â€” Å›redni', price: 39, subtitle:'BuÅ‚ka, jajko, ser, szynka, jogurt' },
      { id:'bs-klasyk-l',  name:'Box Å›niadaniowy Klasyk â€” duÅ¼y',   price: 49, subtitle:'2 kanapki, jogurt, owoc, sok' },

      { id:'bs-fit-s',     name:'Box Å›niadaniowy Fit â€” maÅ‚y',      price: 31, subtitle:'Owsianka, owoc, orzechy' },
      { id:'bs-fit-m',     name:'Box Å›niadaniowy Fit â€” Å›redni',    price: 41, subtitle:'Owsianka, jogurt, owoc, sok' },
      { id:'bs-fit-l',     name:'Box Å›niadaniowy Fit â€” duÅ¼y',      price: 51, subtitle:'Owsianka, jogurt, owoc, smoothie' },

      { id:'bs-vege-s',    name:'Box Å›niadaniowy Vege â€” maÅ‚y',     price: 29, subtitle:'Kanapka vege, hummus, warzywa' },
      { id:'bs-vege-m',    name:'Box Å›niadaniowy Vege â€” Å›redni',   price: 39, subtitle:'Kanapka vege, saÅ‚atka, owoc' },
      { id:'bs-vege-l',    name:'Box Å›niadaniowy Vege â€” duÅ¼y',     price: 49, subtitle:'2 kanapki vege, saÅ‚atka, sok' },

      { id:'bs-slodki-s',  name:'Box Å›niadaniowy SÅ‚odki â€” maÅ‚y',   price: 29, subtitle:'Croissant, dÅ¼em, kawaÅ‚ek brownie' },
      { id:'bs-slodki-m',  name:'Box Å›niadaniowy SÅ‚odki â€” Å›redni', price: 39, subtitle:'Croissant, jogurt z granolÄ…, sok' },
      { id:'bs-slodki-l',  name:'Box Å›niadaniowy SÅ‚odki â€” duÅ¼y',   price: 49, subtitle:'Croissant, tost francuski, jogurt, sok' },
    ];

    const LUNCH_PRODUCTS = [
      { id:'bl-klasyk-s',  name:'Box lunchowy Klasyk â€” maÅ‚y',      price: 35, subtitle:'Burger, frytki mini, sos' },
      { id:'bl-klasyk-m',  name:'Box lunchowy Klasyk â€” Å›redni',    price: 42, subtitle:'Burger, frytki, napÃ³j' },
      { id:'bl-klasyk-l',  name:'Box lunchowy Klasyk â€” duÅ¼y',      price: 49, subtitle:'Burger, frytki duÅ¼e, napÃ³j, deser' },

      { id:'bl-fit-s',     name:'Box lunchowy Fit â€” maÅ‚y',         price: 37, subtitle:'SaÅ‚atka z kurczakiem, woda' },
      { id:'bl-fit-m',     name:'Box lunchowy Fit â€” Å›redni',       price: 44, subtitle:'SaÅ‚atka, pieczywo, woda' },
      { id:'bl-fit-l',     name:'Box lunchowy Fit â€” duÅ¼y',         price: 51, subtitle:'SaÅ‚atka, pieczywo, napÃ³j, deser' },

      { id:'bl-vege-s',    name:'Box lunchowy Vege â€” maÅ‚y',        price: 35, subtitle:'Bowl vege, woda' },
      { id:'bl-vege-m',    name:'Box lunchowy Vege â€” Å›redni',      price: 42, subtitle:'Bowl vege, napÃ³j' },
      { id:'bl-vege-l',    name:'Box lunchowy Vege â€” duÅ¼y',        price: 49, subtitle:'Bowl vege, napÃ³j, deser' },

      { id:'bl-office-s',  name:'Box lunchowy Office â€” maÅ‚y',      price: 36, subtitle:'Kanapka, chipsy, napÃ³j' },
      { id:'bl-office-m',  name:'Box lunchowy Office â€” Å›redni',    price: 43, subtitle:'Kanapka, saÅ‚atka mini, napÃ³j' },
      { id:'bl-office-l',  name:'Box lunchowy Office â€” duÅ¼y',      price: 50, subtitle:'2 kanapki, saÅ‚atka, napÃ³j' },
    ];

    const SANDWICHES = [
      { id:'k-kurczak',   name:'Kanapka z kurczakiem',           price: 18, subtitle:'Kurczak, saÅ‚ata, sos jogurtowy' },
      { id:'k-indyk',     name:'Kanapka z indykiem',             price: 19, subtitle:'Indyk, ser, warzywa, sos miodowo-musztardowy' },
      { id:'k-szarpana',  name:'Kanapka z szarpanÄ… wieprzowinÄ…', price: 21, subtitle:'Pulled pork, coleslaw, pikle' },
      { id:'k-klasyk',    name:'Kanapka klasyczna',              price: 16, subtitle:'Szynka, ser, ogÃ³rek, masÅ‚o' },
      { id:'k-vege-hummus', name:'Kanapka vege z hummusem',      price: 17, subtitle:'Hummus, warzywa, pestki' },
      { id:'k-vege-avo',  name:'Kanapka z awokado i jajkiem',    price: 19, subtitle:'Awokado, jajko, rukola' },
      { id:'k-panini',    name:'Panini z kurczakiem',            price: 20, subtitle:'Grillowana kanapka z kurczakiem i serem' },
      { id:'k-panini-vege', name:'Panini vege',                  price: 19, subtitle:'Grillowana kanapka z warzywami i serem' },
    ];

    const SALADS = [
      { id:'s-cezar',  name:'SaÅ‚atka Caesar', price: 24, subtitle:'Kurczak, parmezan, grzanki, sos Caesar' },
      { id:'s-quinoa', name:'SaÅ‚atka z quinoa', price: 25, subtitle:'Quinoa, warzywa, fetÄ…, pestki' },
      { id:'s-vege',   name:'SaÅ‚atka vege z hummusem', price: 23, subtitle:'Warzywa, hummus, pieczony batat' },
      { id:'s-burak',  name:'SaÅ‚atka z burakiem i kozim serem', price: 25, subtitle:'Burak, ser kozi, rukola, orzechy' },
    ];

    const DESSERTS = [
      { id:'d-brownie',    name:'Brownie czekoladowe', price: 9, subtitle:'GÄ™ste, mocno czekoladowe' },
      { id:'d-cheesecake', name:'Sernik klasyczny', price: 11, subtitle:'Na kruchym spodzie' },
      { id:'d-cookie',     name:'Cookie z czekoladÄ…', price: 7, subtitle:'MiÄ™kkie w Å›rodku, chrupiÄ…ce na zewnÄ…trz' },
      { id:'d-fruit',      name:'Puchar owocÃ³w sezonowych', price: 10, subtitle:'ÅšwieÅ¼e, krojone owoce' },
    ];

    const DRINKS = [
      { id:'n-cola-05',   name:'Cola 0,5 l', price: 8, subtitle:'SchÅ‚odzony napÃ³j gazowany' },
      { id:'n-cola-zero', name:'Cola Zero 0,5 l', price: 8, subtitle:'Bez cukru' },
      { id:'n-sprite',    name:'Lemon-lime 0,5 l', price: 8, subtitle:'NapÃ³j cytrusowy' },
      { id:'n-fanta',     name:'Orange 0,5 l', price: 8, subtitle:'NapÃ³j pomaraÅ„czowy' },
      { id:'n-water',     name:'Woda niegazowana 0,5 l', price: 5, subtitle:'Butelkowana' },
      { id:'n-water-gas', name:'Woda gazowana 0,5 l', price: 5, subtitle:'Butelkowana' },
      { id:'n-juice-o',   name:'Sok pomaraÅ„czowy 0,3 l', price: 9, subtitle:'100% owocÃ³w' },
      { id:'n-juice-a',   name:'Sok jabÅ‚kowy 0,3 l', price: 9, subtitle:'NFC' },
      { id:'n-lemonade',  name:'Lemoniada domowa 0,4 l', price: 12, subtitle:'Cytryna, miÄ™ta, lÃ³d' },
      { id:'n-icecoffee', name:'Kawa mroÅ¼ona 0,4 l', price: 14, subtitle:'Espresso, mleko, lÃ³d' },
      { id:'n-tea',       name:'Herbata mroÅ¼ona 0,4 l', price: 11, subtitle:'Domowa, cytryna' },
      { id:'n-smoothie',  name:'Smoothie owocowe 0,4 l', price: 15, subtitle:'Miks owocÃ³w sezonowych' },
    ];

    const PRODUCTS = {
      'boxy-sniadaniowe': BREAKFAST_PRODUCTS,
      'boxy-lunchowe': LUNCH_PRODUCTS,
      'kanapki': SANDWICHES,
      'salatki': SALADS,
      'desery': DESSERTS,
      'napoje': DRINKS,
    };

    const useLocalStorage = (key, initial) => {
      const [state, setState] = useState(() => {
        try { return JSON.parse(localStorage.getItem(key)) ?? initial } catch { return initial }
      });
      useEffect(() => { localStorage.setItem(key, JSON.stringify(state)) }, [key, state]);
      return [state, setState];
    };
    const currency = (n) => new Intl.NumberFormat('pl-PL', { style:'currency', currency:'PLN' }).format(n);

    const ToastContext = React.createContext();
    const useToast = () => React.useContext(ToastContext);

    const ToastProvider = ({children}) => {
      const [toast, setToast] = useState(null);
      const timeoutRef = React.useRef(null);

      const show = (message) => {
        setToast(message);
        if (timeoutRef.current) clearTimeout(timeoutRef.current);
        timeoutRef.current = setTimeout(() => setToast(null), 2500);
      };

      const close = () => {
        if (timeoutRef.current) clearTimeout(timeoutRef.current);
        setToast(null);
      };

      return (
        <ToastContext.Provider value={{ show }}>
          {children}
          {toast && (
            <div className="fixed bottom-24 left-1/2 -translate-x-1/2 z-[80] pointer-events-none">
              <div className="relative pointer-events-auto toast-enter bg-white/95 border border-emerald-200 shadow-glass rounded-2xl px-4 py-3 min-w-[260px] max-w-[90vw] flex items-start gap-3">
                <div className="w-9 h-9 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600 text-lg">
                  âœ“
                </div>
                <div className="flex-1">
                  <div className="text-[10px] font-semibold uppercase tracking-[0.12em] text-emerald-600">
                    Dodano do koszyka
                  </div>
                  <div className="text-sm text-gray-900 mt-0.5">
                    {toast}
                  </div>
                </div>
                <button
                  type="button"
                  onClick={close}
                  className="ml-2 text-gray-400 hover:text-gray-600 text-xl leading-none"
                  aria-label="Zamknij powiadomienie"
                >
                  Ã—
                </button>
                <div className="absolute left-4 right-4 -bottom-1.5 h-1 rounded-full overflow-hidden bg-emerald-50">
                  <div className="toast-bar h-full bg-emerald-400"></div>
                </div>
              </div>
            </div>
          )}
        </ToastContext.Provider>
      );
    };

    const Logo = () => (
      <a href="#/" className="flex items-center gap-3 group">
        <div className="w-10 h-10 rounded-2xl bg-white flex items-center justify-center border border-gray-100 overflow-hidden shadow-soft logo-glow">
          <img
            src="https://i.imgur.com/f9TN0Gh.png"
            alt="eatmi.pl â€” logo"
            loading="lazy"
            className="w-9 h-9 object-contain transition-transform duration-500 group-hover:-rotate-6 group-hover:scale-110"
          />
        </div>
        <span className="font-extrabold tracking-tight">
          eatmi<span className="text-brand-yellow">.pl</span>
        </span>
      </a>
    );

    const CartContext = React.createContext();
    const CartProvider = ({children}) => {
      const [cart, setCart] = useLocalStorage('eatmi-cart', []);
      const { show } = useToast() || {};

      const add = (entry) => {
        const newItem = { id: (crypto?.randomUUID ? crypto.randomUUID() : `${Date.now()}-${Math.random()}`), qty: 1, ...entry };
        setCart(prev => [...prev, newItem]);
        if (show) show(`Dodano: ${entry.name}`);
      };
      const remove  = (id) => setCart(prev => prev.filter(i => i.id !== id));
      const setQty  = (id, qty) => setCart(prev => prev.map(i => i.id === id ? {...i, qty: Math.max(1, qty|0)} : i));
      const incQty  = (id) => setCart(prev => prev.map(i => i.id === id ? {...i, qty: (i.qty||1)+1} : i));
      const decQty  = (id) => setCart(prev => prev.map(i => i.id === id ? {...i, qty: Math.max(1, (i.qty||1)-1)} : i));
      const clear   = () => setCart([]);
      const lineTotal = (i) => (i.price || 0) * (i.qty || 1);
      const total  = useMemo(() => cart.reduce((s,i)=> s + lineTotal(i), 0), [cart]);
      return (
        <CartContext.Provider value={{cart, add, remove, setQty, incQty, decQty, clear, lineTotal, total}}>
          {children}
        </CartContext.Provider>
      );
    }
    const useCart = () => React.useContext(CartContext);

    const CartButton = () => {
      const { cart, total } = useCart();
      return (
        <a href="#/koszyk" className="relative inline-flex items-center gap-2 border border-gray-200 bg-white px-4 py-2 rounded-xl shadow-soft hover:shadow-md transition">
          <i data-lucide="shopping-cart" className="w-5 h-5"></i>
          <span className="text-sm font-semibold">{currency(total)}</span>
          <span className="absolute -top-2 -right-2 bg-brand-yellow text-gray-900 text-xs font-bold w-6 h-6 rounded-full grid place-items-center">
            {cart.reduce((s,i)=>s+(i.qty||1),0)}
          </span>
        </a>
      )
    }

    const Header = ({ onOpenAuth }) => (
      <header className="sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-gray-200">
        <div className="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
          <Logo />
          <nav className="hidden md:flex items-center gap-6 text-sm">
            <a href="#kategorie" className="hover:text-gray-900 text-gray-600">Menu</a>
            <a href="#/kategoria/boxy-sniadaniowe" className="hover:text-gray-900 text-gray-600">Åšniadania</a>
            <a href="#/kategoria/boxy-lunchowe" className="hover:text-gray-900 text-gray-600">Lunch</a>
            <a href="#o-nas" className="hover:text-gray-900 text-gray-600">O nas</a>
            <a href="#kontakt" className="hover:text-gray-900 text-gray-600">Kontakt</a>
          </nav>

          <div className="flex items-center gap-3">
            <button
              type="button"
              onClick={onOpenAuth}
              className="hidden md:inline-flex items-center gap-2 border border-gray-200 bg-white px-4 py-2 rounded-xl shadow-soft hover:shadow-md transition text-sm font-semibold text-gray-800">
              <i data-lucide="user" className="w-4 h-4"></i>
              <span>Konto</span>
            </button>

            <button
              type="button"
              onClick={onOpenAuth}
              className="md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl border border-gray-200 bg-white shadow-soft"
              aria-label="Moje konto">
              <i data-lucide="user" className="w-5 h-5"></i>
            </button>

            <CartButton />
          </div>
        </div>
      </header>
    );

    // HERO: tylko lewa strona (brak prawej kolumny)
    const Hero = () => (
      <section className="relative overflow-hidden">
        <div className="max-w-6xl mx-auto px-4 py-12 md:py-20">
          <div className="max-w-2xl">
            <div className="inline-flex items-center gap-2 mb-3 px-4 py-2 rounded-full bg-white/80 border border-gray-200 shadow-soft">
              <span className="text-xl">ðŸ‘‹</span>
              <span className="text-sm md:text-base font-semibold text-gray-900">
                CzeÅ›Ä‡, na co masz dziÅ› ochotÄ™?
              </span>
            </div>

            <h1 className="text-4xl md:text-5xl font-extrabold leading-tight">
              Wybierz kategoriÄ™ i{" "}
              <span className="text-brand-yellow">zamÃ³w online</span>
            </h1>
            <p className="mt-4 text-gray-600 max-w-prose">
              Boxy Å›niadaniowe i lunchowe, kanapki, saÅ‚atki, desery i napoje.
              Jak w kiosku w restauracji â€” wybierasz kategoriÄ™, klikasz pozycje i finalizujesz zamÃ³wienie.
            </p>
            <div className="mt-6 flex flex-wrap gap-3">
              <a href="#kategorie" className="inline-flex items-center gap-2 bg-brand-yellow text-gray-900 font-semibold px-6 py-3 rounded-xl2 shadow-soft hover:scale-[1.02] transition">
                <i data-lucide="shopping-bag" className="w-5 h-5"></i>
                PrzeglÄ…daj menu
              </a>
              <a href="#/kategoria/boxy-sniadaniowe" className="inline-flex items-center gap-2 border border-gray-300 bg-white text-gray-900 font-semibold px-6 py-3 rounded-xl2 shadow-soft hover:scale-[1.02] transition">
                <i data-lucide="package-open" className="w-5 h-5"></i>
                Zobacz boxy Å›niadaniowe
              </a>
            </div>
          </div>
        </div>
      </section>
    );

    const SectionTitle = ({eyebrow, title, subtitle}) => (
      <div className="text-center max-w-2xl mx-auto">
        {eyebrow && <div className="text-xs uppercase tracking-widest text-gray-500">{eyebrow}</div>}
        <h2 className="text-3xl md:text-4xl font-extrabold mt-1">{title}</h2>
        {subtitle && <p className="text-gray-600 mt-2">{subtitle}</p>}
      </div>
    );

    const CategoryCard = ({ category }) => {
      const handleClick = () => { window.location.hash = `#/kategoria/${category.id}`; };
      return (
        <button type="button" onClick={handleClick}
          className="group bg-white border border-gray-200 rounded-2xl p-5 text-left shadow-soft hover:shadow-md hover:-translate-y-1 transition w-full">
          <div className="flex items-center justify-between gap-3">
            <div>
              <div className="inline-flex items-center gap-2 text-xs uppercase tracking-widest text-gray-500">
                <span className="w-2 h-2 rounded-full bg-brand-yellow"></span>
                Kategoria
              </div>
              <h3 className="mt-1 text-lg font-extrabold">{category.name}</h3>
            </div>
            <div className="w-10 h-10 rounded-xl bg-brand-yellow/20 grid place-items-center">
              <i data-lucide={category.icon} className="w-5 h-5 text-gray-900"></i>
            </div>
          </div>
          <p className="mt-3 text-sm text-gray-600">{category.description}</p>
          <div className="mt-4 inline-flex items-center gap-2 text-sm font-semibold text-gray-900 group-hover:gap-3 transition">
            OtwÃ³rz kategoriÄ™ <i data-lucide="arrow-right" className="w-4 h-4"></i>
          </div>
        </button>
      );
    };

    const CategoryPage = ({ categoryId }) => {
      const { add } = useCart();
      const category = PRODUCT_CATEGORIES.find(c => c.id === categoryId);
      const items = PRODUCTS[categoryId] || [];

      if (!category) {
        return (
          <section className="py-10">
            <div className="max-w-6xl mx-auto px-4">
              <a href="#/" className="inline-flex items-center gap-2 text-sm text-gray-600">
                <i data-lucide="arrow-left" className="w-4 h-4"></i> WrÃ³Ä‡
              </a>
              <h2 className="text-2xl font-extrabold mt-3">Kategoria nie istnieje</h2>
              <p className="mt-2 text-gray-600">WrÃ³Ä‡ do menu i wybierz jednÄ… z dostÄ™pnych kategorii.</p>
            </div>
          </section>
        );
      }

      const handleAdd = (item) => add({ type: 'product', name: item.name, price: item.price });

      return (
        <section className="py-10">
          <div className="max-w-6xl mx-auto px-4">
            <a href="#/" className="inline-flex items-center gap-2 text-sm text-gray-600">
              <i data-lucide="arrow-left" className="w-4 h-4"></i> WrÃ³Ä‡ do menu
            </a>

            <div className="mt-4 flex items-center gap-3">
              <div className="w-10 h-10 rounded-xl bg-brand-yellow/20 grid place-items-center">
                <i data-lucide={category.icon} className="w-5 h-5 text-gray-900"></i>
              </div>
              <div>
                <h2 className="text-2xl md:text-3xl font-extrabold">{category.name}</h2>
                <p className="text-sm text-gray-600 mt-1">
                  Wybierz pozycje z tej kategorii i dodaj do koszyka.
                </p>
              </div>
            </div>

            <div className="mt-6 grid sm:grid-cols-2 lg:grid-cols-3 gap-5">
              {items.map(item => (
                <div key={item.id}
                  className="bg-white border border-gray-200 rounded-2xl p-5 flex flex-col justify-between shadow-soft hover:shadow-md hover:-translate-y-0.5 transition">
                  <div>
                    <h3 className="text-base font-extrabold text-gray-900">{item.name}</h3>
                    {item.subtitle && <p className="mt-1 text-sm text-gray-600">{item.subtitle}</p>}
                  </div>
                  <div className="mt-4 flex items-center justify-between gap-3">
                    <div className="text-lg font-extrabold">{currency(item.price)}</div>
                    <button type="button" onClick={() => handleAdd(item)}
                      className="inline-flex items-center justify-center gap-2 bg-brand-yellow text-gray-900 font-semibold px-4 py-2 rounded-xl hover:scale-[1.02] transition">
                      <i data-lucide="plus" className="w-4 h-4"></i> Dodaj
                    </button>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </section>
      );
    };

    const EXTRA_ITEMS = [
      { id:'extra-brownie',  name:'Brownie do kawy',       price: 9 },
      { id:'extra-lemoniada',name:'Domowa lemoniada 0,4l', price: 12 },
      { id:'extra-cookie',   name:'Cookie czekoladowe',    price: 7 },
    ];

    const Koszyk = () => {
      const { cart, remove, clear, total, incQty, decQty, setQty, lineTotal, add } = useCart();
      const goToCheckout = () => window.location.hash = '#/zamowienie';
      return (
        <section className="py-10">
          <div className="max-w-6xl mx-auto px-4">
            <a href="#/" className="inline-flex items-center gap-2 text-sm text-gray-600">
              <i data-lucide="arrow-left" className="w-4 h-4"></i> WrÃ³Ä‡
            </a>
            <h2 className="text-2xl font-extrabold mt-3">Koszyk</h2>
            {cart.length === 0 ? (
              <p className="text-gray-600 mt-2">TwÃ³j koszyk jest pusty.</p>
            ) : (
              <>
                <div className="mt-6 grid md:grid-cols-3 gap-6 items-start">
                  <div className="md:col-span-2 space-y-4">
                    {cart.map(item => (
                      <div key={item.id}
                        className="bg-white border border-gray-200 rounded-2xl p-4 flex flex-col md:flex-row gap-4 md:items-center justify-between w-full">
                        <div className="min-w-0 flex-1">
                          <div className="font-bold break-words">{item.name}</div>
                        </div>

                        <div className="flex flex-col sm:flex-row md:flex-row gap-3 md:gap-4 items-stretch md:items-center w-full md:w-auto justify-between md:justify-end">
                          <div className="flex items-center gap-2 self-start">
                            <button onClick={()=> decQty(item.id)} className="w-8 h-8 rounded-lg border border-gray-200 grid place-items-center">âˆ’</button>
                            <input value={item.qty||1}
                              onChange={(e)=> setQty(item.id, parseInt(e.target.value||'1',10))}
                              className="w-14 text-center border border-gray-200 rounded-lg py-1"
                              inputMode="numeric" pattern="[0-9]*"/>
                            <button onClick={()=> incQty(item.id)} className="w-8 h-8 rounded-lg border border-gray-200 grid place-items-center">+</button>
                          </div>

                          <div className="text-right self-center">
                            <div className="font-extrabold whitespace-nowrap">{currency(lineTotal(item))}</div>
                            <div className="text-xs text-gray-500 whitespace-nowrap">({currency(item.price)} / szt.)</div>
                          </div>

                          <button onClick={()=> remove(item.id)} className="text-red-600 hover:underline self-center text-sm">UsuÅ„</button>
                        </div>
                      </div>
                    ))}
                  </div>
                  <aside className="bg-white border border-gray-200 rounded-2xl p-5">
                    <div className="flex items-center justify-between">
                      <span className="font-semibold">Suma</span>
                      <span className="font-extrabold">{currency(total)}</span>
                    </div>
                    <div className="mt-4 grid gap-2">
                      <button onClick={goToCheckout} className="w-full bg-brand-yellow text-gray-900 font-semibold rounded-xl px-4 py-3">
                        PrzejdÅº do zamÃ³wienia
                      </button>
                      <button onClick={clear} className="w-full bg-gray-100 text-gray-700 rounded-xl px-4 py-3">
                        WyczyÅ›Ä‡ koszyk
                      </button>
                    </div>
                  </aside>
                </div>

                <div className="mt-10 border-t border-gray-200 pt-6">
                  <h3 className="text-lg font-bold flex items-center gap-2">
                    <span>MoÅ¼e dorzucisz coÅ› jeszcze?</span>
                    <span className="text-xs px-2 py-0.5 rounded-full bg-gray-900 text-white">1 klik i dodane</span>
                  </h3>
                  <p className="text-sm text-gray-600 mt-1">
                    SÅ‚odki dodatek lub napÃ³j czÄ™sto robi rÃ³Å¼nicÄ™ â€” szczegÃ³lnie przy wiÄ™kszych zamÃ³wieniach.
                  </p>
                  <div className="mt-4 flex flex-wrap gap-3">
                    {EXTRA_ITEMS.map(extra => (
                      <button key={extra.id}
                        onClick={() => add({ type:'extra', name: extra.name, price: extra.price })}
                        className="flex items-center gap-2 px-4 py-2 rounded-full bg-white border border-gray-200 shadow-soft text-sm hover:shadow-md hover:-translate-y-0.5 transition">
                        <span className="text-base">+</span>
                        <span>{extra.name}</span>
                        <span className="font-semibold text-gray-900">{currency(extra.price)}</span>
                      </button>
                    ))}
                  </div>
                </div>
              </>
            )}
          </div>
        </section>
      );
    }

    const Zamowienie = () => {
      const { cart, total, clear, lineTotal } = useCart();
      const [form, setForm] = useState({
        imieNazwisko:'', telefon:'', email:'', miasto:'', kod:'', ulica:'', nrBud:'', pietro:'', lokal:'', uwagi:'', faktura:false, nip:'', firma:''
      });

      const handle = (k,v)=> setForm(s=> ({...s,[k]:v}));

      // ===== PAYU SUBMIT =====
      const submit = async () => {
        if(!form.imieNazwisko || !form.telefon || !form.miasto || !form.ulica) {
          alert('UzupeÅ‚nij wymagane pola');
          return;
        }

        try {
          const payload = { customer: form, cart, total };

          // TU PODAJ ADRES SWOJEGO BACKENDU:
          const r = await fetch("/api/payu/order", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload),
          });

          const data = await r.json();
          if (!data.redirectUri) {
            alert("Nie udaÅ‚o siÄ™ rozpoczÄ…Ä‡ pÅ‚atnoÅ›ci PayU.");
            return;
          }

          window.location.href = data.redirectUri;
        } catch (e) {
          alert("BÅ‚Ä…d poÅ‚Ä…czenia z PayU.");
        }
      };

      return (
        <section className="py-10">
          <div className="max-w-6xl mx-auto px-4">
            <a href="#/koszyk" className="inline-flex items-center gap-2 text-sm text-gray-600">
              <i data-lucide="arrow-left" className="w-4 h-4"></i> WrÃ³Ä‡ do koszyka
            </a>
            <h2 className="text-2xl font-extrabold mt-3">ZamÃ³wienie</h2>

            <div className="mt-6 grid lg:grid-cols-3 gap-6 items-start">
              <div className="lg:col-span-2 bg-white border border-gray-200 rounded-2xl p-5">
                <div className="grid md:grid-cols-2 gap-4">
                  <div>
                    <label className="text-xs uppercase tracking-wider text-gray-500">ImiÄ™ i nazwisko *</label>
                    <input value={form.imieNazwisko} onChange={e=>handle('imieNazwisko', e.target.value)}
                      className="input w-full border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-yellow bg-white"/>
                  </div>
                  <div>
                    <label className="text-xs uppercase tracking-wider text-gray-500">Nr telefonu *</label>
                    <input value={form.telefon} onChange={e=>handle('telefon', e.target.value)}
                      className="input w-full border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-yellow bg-white"/>
                  </div>
                  <div>
                    <label className="text-xs uppercase tracking-wider text-gray-500">Adres email</label>
                    <input value={form.email} onChange={e=>handle('email', e.target.value)}
                      className="input w-full border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-yellow bg-white"/>
                  </div>
                  <div>
                    <label className="text-xs uppercase tracking-wider text-gray-500">Miasto *</label>
                    <input value={form.miasto} onChange={e=>handle('miasto', e.target.value)}
                      className="input w-full border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-yellow bg-white"/>
                  </div>
                  <div>
                    <label className="text-xs uppercase tracking-wider text-gray-500">Kod pocztowy</label>
                    <input value={form.kod} onChange={e=>handle('kod', e.target.value)}
                      className="input w-full border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-yellow bg-white"/>
                  </div>
                  <div>
                    <label className="text-xs uppercase tracking-wider text-gray-500">Ulica *</label>
                    <input value={form.ulica} onChange={e=>handle('ulica', e.target.value)}
                      className="input w-full border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-yellow bg-white"/>
                  </div>
                  <div>
                    <label className="text-xs uppercase tracking-wider text-gray-500">Nr budynku</label>
                    <input value={form.nrBud} onChange={e=>handle('nrBud', e.target.value)}
                      className="input w-full border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-yellow bg-white"/>
                  </div>
                  <div>
                    <label className="text-xs uppercase tracking-wider text-gray-500">PiÄ™tro</label>
                    <input value={form.pietro} onChange={e=>handle('pietro', e.target.value)}
                      className="input w-full border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-yellow bg-white"/>
                  </div>
                  <div>
                    <label className="text-xs uppercase tracking-wider text-gray-500">Nr lokalu / mieszkania</label>
                    <input value={form.lokal} onChange={e=>handle('lokal', e.target.value)}
                      className="input w-full border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-yellow bg-white"/>
                  </div>
                  <div className="md:col-span-2">
                    <label className="text-xs uppercase tracking-wider text-gray-500">Uwagi do zamÃ³wienia</label>
                    <textarea value={form.uwagi} onChange={e=>handle('uwagi', e.target.value)}
                      className="w-full border border-gray-200 rounded-xl px-4 py-3 min-h-[100px]"></textarea>
                  </div>
                </div>

                <div className="mt-4">
                  <label className="flex items-center gap-2 text-sm">
                    <input type="checkbox" checked={form.faktura} onChange={e=>handle('faktura', e.target.checked)} />
                    ChcÄ™ dane do faktury
                  </label>
                  {form.faktura && (
                    <div className="grid md:grid-cols-2 gap-4 mt-3">
                      <div>
                        <label className="text-xs uppercase tracking-wider text-gray-500">NIP</label>
                        <input value={form.nip} onChange={e=>handle('nip', e.target.value)}
                          className="input w-full border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-yellow bg-white"/>
                      </div>
                      <div>
                        <label className="text-xs uppercase tracking-wider text-gray-500">Nazwa firmy</label>
                        <input value={form.firma} onChange={e=>handle('firma', e.target.value)}
                          className="input w-full border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-yellow bg-white"/>
                      </div>
                    </div>
                  )}
                </div>
              </div>

              <aside className="bg-white border border-gray-200 rounded-2xl p-5">
                <div className="font-semibold">Podsumowanie</div>
                <div className="mt-3 space-y-3 max-h-64 overflow-auto pr-2">
                  {cart.map(i => (
                    <div key={i.id} className="text-sm">
                      <div className="flex items-center justify-between">
                        <span className="font-medium">{i.name} Ã— {i.qty||1}</span>
                        <span className="font-bold">{currency(lineTotal(i))}</span>
                      </div>
                    </div>
                  ))}
                </div>
                <div className="flex items-center justify-between mt-4 text-lg">
                  <span className="font-bold">Do zapÅ‚aty</span>
                  <span className="font-extrabold">{currency(total)}</span>
                </div>
                <button onClick={submit}
                  className="w-full mt-4 bg-brand-yellow text-gray-900 font-semibold rounded-xl px-4 py-3">
                  PÅ‚atnoÅ›Ä‡ online (PayU)
                </button>
              </aside>
            </div>
          </div>
        </section>
      );
    }

    const Input = (props) => (
      <input {...props}
        className={(props.className||'') + ' input w-full border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-yellow bg-white'} />
    );
    const Label = ({children}) => (
      <label className="text-xs uppercase tracking-wider text-gray-500">{children}</label>
    );

    const AuthModal = ({ open, onClose }) => {
      const [mode, setMode] = useState('login');
      const [form, setForm] = useState({ email: '', password: '', confirm: '' });
      if (!open) return null;

      const handleChange = (field, value) => setForm(prev => ({ ...prev, [field]: value }));

      const handleSubmit = (e) => {
        e.preventDefault();
        if (mode === 'register' && form.password !== form.confirm) {
          alert('HasÅ‚a nie sÄ… takie same.');
          return;
        }
        alert(`(${mode === 'login' ? 'Logowanie' : 'Rejestracja'}) to na razie makieta UI :)`);
        onClose();
      };

      const switchToRegister = () => { setMode('register'); setForm({ email: '', password: '', confirm: '' }); };
      const switchToLogin = () => { setMode('login'); setForm({ email: '', password: '', confirm: '' }); };

      return (
        <div className="fixed inset-0 z-[90] bg-black/60 flex items-center justify-center px-4" onClick={onClose} role="dialog" aria-modal="true">
          <div className="relative w-full max-w-md bg-white rounded-2xl shadow-glass border border-gray-200 p-6" onClick={(e) => e.stopPropagation()}>
            <button type="button" onClick={onClose} className="absolute top-3 right-3 p-2 rounded-full bg-white border border-gray-200 shadow-soft hover:bg-gray-50" aria-label="Zamknij okno logowania">
              <i data-lucide="x" className="w-4 h-4"></i>
            </button>

            <div className="mb-4">
              <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">
                {mode === 'login' ? 'Logowanie' : 'Rejestracja'}
              </div>
              <h3 className="text-xl font-extrabold mt-1">
                {mode === 'login' ? 'Zaloguj siÄ™ do eatmi' : 'ZaÅ‚Ã³Å¼ konto w eatmi'}
              </h3>
              <p className="text-xs text-gray-500 mt-1">
                {mode === 'login'
                  ? 'Zamawiaj szybciej, zapisuj ulubione zestawy i Å›ledÅº historiÄ™ zamÃ³wieÅ„ (makieta).'
                  : 'UtwÃ³rz konto, aby w przyszÅ‚oÅ›ci zapisywaÄ‡ swoje boxy i dane dostawy (makieta UI).'}
              </p>
            </div>

            <div className="flex flex-col gap-2 mb-4">
              <button type="button" className="btn flex w-full items-center justify-center gap-2 rounded-[10px] border border-[#ededef] bg:white px-3 py-2 text-sm font-medium hover:border-[#2d79f3] transition">
                <span className="inline-flex h-5 w-5 items-center justify-center">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" className="h-5 w-5" aria-hidden="true">
                    <path fill="#EA4335" d="M24 9.5c3.54 0 6 1.54 7.38 2.84l5.42-5.42C33.64 3.58 29.3 1.5 24 1.5 14.88 1.5 7.09 6.98 3.66 14.72l6.77 5.26C11.86 14.33 17.38 9.5 24 9.5z"/>
                    <path fill="#4285F4" d="M46.5 24.5c0-1.57-.14-3.08-.41-4.5H24v9h12.7c-.55 2.92-2.22 5.4-4.73 7.07l7.64 5.93C43.86 38.63 46.5 32.1 46.5 24.5z"/>
                    <path fill="#FBBC05" d="M10.43 28.22a14.5 14.5 0 010-8.44L3.66 14.72A22.43 22.43 0 001.5 24.5c0 3.65.87 7.1 2.16 10.03l6.77-5.26z"/>
                    <path fill="#34A853" d="M24 47.5c5.85 0 10.77-1.93 14.36-5.47l-7.64-5.93C28.73 37.54 26.53 38.5 24 38.5c-6.62 0-12.14-4.83-13.57-11.28l-6.77 5.26C7.09 42.02 14.88 47.5 24 47.5z"/>
                    <path fill="none" d="M1.5 1.5h45v45h-45z"/>
                  </svg>
                </span>
                <span>Zaloguj siÄ™ przez Google</span>
              </button>

              <button type="button" className="btn flex w-full items-center justify-center gap-2 rounded-[10px] border border-[#ededef] bg-white px-3 py-2 text-sm font-medium hover:border-[#2d79f3] transition">
                <span className="inline-flex h-5 w-5 items-center justify-center">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" className="h-5 w-5" aria-hidden="true">
                    <path fill="currentColor" d="M318.7 268.7c.5 55.4 48.6 73.8 49.1 74-0.4 1.3-7.7 26.3-25.4 52.1-15.3 22.4-31.2 44.7-56.3 45.1-24.6.4-32.5-14.6-60.6-14.6-28.1 0-37 14.2-60.4 15-24.3.9-42.8-24.2-58.1-46.5-31.6-45.9-55.8-129.6-23.4-186.2 16.2-28.2 45.1-46.1 76.5-46.5 23.9-.5 46.4 16 60.6 16 14.2 0 41.7-19.8 70.3-16.9 12 0.5 45.7 4.9 67.4 37-1.7 1-40.1 23.4-39.7 69.5zm-46.4-135.6c12.9-15.6 21.6-37.4 19.2-59.1-18.5.7-40.8 12.3-54 27.9-11.9 13.8-22.4 36-19.6 57.3 20.7 1.6 41.9-10.5 54.4-26.1z"/>
                  </svg>
                </span>
                <span>Zaloguj siÄ™ przez Apple</span>
              </button>
            </div>

            <div className="flex items-center gap-2 mb-4">
              <div className="h-px flex-1 bg-gray-200" />
              <span className="text-[11px] uppercase tracking-[0.16em] text-gray-400">
                lub {mode === 'login' ? 'e-mail i hasÅ‚o' : 'zarejestruj siÄ™ mailem'}
              </span>
              <div className="h-px flex-1 bg-gray-200" />
            </div>

            <form onSubmit={handleSubmit} className="space-y-3">
              <div>
                <Label>Adres e-mail</Label>
                <Input type="email" required value={form.email}
                  onChange={(e) => handleChange('email', e.target.value)}
                  placeholder="np. jan.kowalski@example.com" className="mt-1" />
              </div>

              <div>
                <Label>HasÅ‚o</Label>
                <Input type="password" required value={form.password}
                  onChange={(e) => handleChange('password', e.target.value)}
                  placeholder="Wpisz hasÅ‚o" className="mt-1" />
              </div>

              {mode === 'register' && (
                <div>
                  <Label>PowtÃ³rz hasÅ‚o</Label>
                  <Input type="password" required value={form.confirm}
                    onChange={(e) => handleChange('confirm', e.target.value)}
                    placeholder="PowtÃ³rz hasÅ‚o" className="mt-1" />
                </div>
              )}

              {mode === 'login' && (
                <div className="flex justify-end">
                  <button type="button" className="text-xs text-gray-500 hover:text-gray-700 underline underline-offset-2">
                    ZapomniaÅ‚em hasÅ‚a
                  </button>
                </div>
              )}

              <button type="submit" className="button-submit w-full mt-1 bg-gray-900 text-white font-semibold rounded-xl px-4 py-3 text-sm hover:bg-black">
                {mode === 'login' ? 'Zaloguj siÄ™' : 'Zarejestruj siÄ™'}
              </button>
            </form>

            <div className="mt-4 text-xs text-gray-600 text-center">
              {mode === 'login' ? (
                <>Nie masz jeszcze konta?{' '}
                  <button type="button" onClick={() => { setMode('register'); setForm({ email:'', password:'', confirm:'' }) }}
                    className="span font-semibold text-gray-900 underline underline-offset-2">
                    Zarejestruj siÄ™
                  </button>
                </>
              ) : (
                <>Masz juÅ¼ konto?{' '}
                  <button type="button" onClick={() => { setMode('login'); setForm({ email:'', password:'', confirm:'' }) }}
                    className="span font-semibold text-gray-900 underline underline-offset-2">
                    Zaloguj siÄ™
                  </button>
                </>
              )}
            </div>
          </div>
        </div>
      );
    };

    const Home = () => (
      <>
        <Hero />

        <section id="kategorie" className="py-12 md:py-20 bg-gradient-to-b from-white to-brand-light">
          <div className="max-w-6xl mx-auto px-4">
            <SectionTitle eyebrow="Menu" title="Wybierz kategoriÄ™" subtitle="Najpierw wybierz kategoriÄ™, potem dodawaj boxy i produkty do koszyka â€” w kilka klikniÄ™Ä‡!" />
            <div className="mt-8 grid md:grid-cols-3 gap-6">
              {PRODUCT_CATEGORIES.map(cat => <CategoryCard key={cat.id} category={cat} />)}
            </div>
          </div>
        </section>

        <section id="o-nas" className="py-12">
          <div className="max-w-6xl mx-auto px-4 grid md:grid-cols-2 gap-10 items-center">
            <img className="w-full rounded-2xl shadow-soft" loading="lazy"
              src="https://images.unsplash.com/photo-1526318472351-c75fcf070305?q=80&w=1400&auto=format&fit=crop"
              alt="Kuchnia Eatmi" />
            <div>
              <SectionTitle title="JakoÅ›Ä‡ & prostota" subtitle="Stawiamy na Å›wieÅ¼oÅ›Ä‡, przejrzystoÅ›Ä‡ i szybkie zamÃ³wienia." />
              <ul className="mt-4 space-y-2 text-gray-700">
                <li className="flex gap-3"><i data-lucide="check-circle" className="w-5 h-5 text-brand-yellow"></i>ÅšwieÅ¼e skÅ‚adniki kaÅ¼dego dnia</li>
                <li className="flex gap-3"><i data-lucide="check-circle" className="w-5 h-5 text-brand-yellow"></i>ZamÃ³wienia online w kilka klikÃ³w</li>
                <li className="flex gap-3"><i data-lucide="check-circle" className="w-5 h-5 text-brand-yellow"></i>Dostawa na czas</li>
              </ul>
            </div>
          </div>
        </section>

        <section id="kontakt" className="py-12 bg-white">
          <div className="max-w-6xl mx-auto px-4">
            <SectionTitle title="Kontakt" subtitle="Masz pytania? Napisz do nas." />
            <form className="max-w-xl mx-auto mt-8 bg-white border border-gray-200 rounded-2xl p-6 shadow-soft">
              <div className="grid md:grid-cols-2 gap-4">
                <input className="input w-full border border-gray-200 rounded-xl px-4 py-3" placeholder="ImiÄ™" />
                <input className="input w-full border border-gray-200 rounded-xl px-4 py-3" placeholder="Email" />
              </div>
              <textarea className="input w-full border border-gray-200 rounded-xl px-4 py-3 mt-4" rows="4" placeholder="WiadomoÅ›Ä‡"></textarea>
              <button type="button" className="mt-4 bg-gray-900 text-white rounded-xl px-5 py-3 font-semibold">WyÅ›lij</button>
            </form>
          </div>
        </section>
      </>
    );

    const FloatingNav = () => (
      <nav className="fixed bottom-4 left-1/2 -translate-x-1/2 z-50 w-[min(720px,92%)] liquid border border-white/50 rounded-2xl shadow-glass">
        <ul className="grid grid-cols-4">
          <li><a href="#kategorie" className="flex flex-col items-center py-3 text-sm font-medium"><i data-lucide="shopping-bag" className="w-5 h-5"></i>Menu</a></li>
          <li><a href="#/kategoria/boxy-sniadaniowe" className="flex flex-col items-center py-3 text-sm font-medium"><i data-lucide="package-open" className="w-5 h-5"></i>Åšniadania</a></li>
          <li><a href="#/kategoria/boxy-lunchowe" className="flex flex-col items-center py-3 text-sm font-medium"><i data-lucide="utensils-crossed" className="w-5 h-5"></i>Lunch</a></li>
          <li><a href="#kontakt" className="flex flex-col items-center py-3 text-sm font-medium"><i data-lucide="message-square" className="w-5 h-5"></i>Kontakt</a></li>
        </ul>
      </nav>
    );

    const isMobileDevice = () => {
      if (typeof navigator === 'undefined') return false;
      const ua = navigator.userAgent || '';
      const mobileRegex = /Mobi|Android|iPhone|iPad|iPod/i;
      const byUA = mobileRegex.test(ua);
      const byWidth = typeof window !== 'undefined' ? window.innerWidth <= 1024 : false;
      return byUA || byWidth;
    };

    const detectPlatform = () => {
      if (typeof navigator === 'undefined') return { type: 'other', browser: 'other' };
      const ua = navigator.userAgent || '';
      const isIOS = /iPhone|iPad|iPod/i.test(ua);
      const isAndroid = /Android/i.test(ua);
      const isSafari = /Safari/i.test(ua) && !/Chrome/i.test(ua);
      const isChrome = /Chrome|CriOS/i.test(ua);

      if (isIOS) return { type: 'ios', browser: isSafari ? 'safari' : (isChrome ? 'chrome' : 'other') };
      if (isAndroid) return { type: 'android', browser: isChrome ? 'chrome' : 'other' };
      return { type: 'other', browser: 'other' };
    };

    const AddToHomePrompt = ({ open, onClose, platform }) => {
      if (!open) return null;

      const isIOS = platform?.type === 'ios';
      const isAndroid = platform?.type === 'android';

      const handleAddNow = () => {
        try { window.scrollTo({ top: 0, behavior: 'smooth' }); } catch {}
        onClose();
      };

      return (
        <div className="fixed inset-0 z-[85] bg-black/55 flex items-center justify-center px-4" role="dialog" aria-modal="true" onClick={onClose}>
          <div className="relative w-full max-w-md bg-white rounded-2xl shadow-glass border border-gray-200 p-5" onClick={(e)=>e.stopPropagation()}>
            <button type="button" onClick={onClose} className="absolute top-3 right-3 p-2 rounded-full bg-white border border-gray-200 shadow-soft hover:bg-gray-50" aria-label="Zamknij okno">
              <span className="text-lg leading-none">Ã—</span>
            </button>

            <div className="flex items-start gap-3">
              <div className="shrink-0 w-10 h-10 rounded-xl grid place-items-center bg-brand-yellow">
                <span className="text-xl">ðŸ“±</span>
              </div>
              <div>
                <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">Szybsze zamawianie</div>
                <h3 className="text-lg font-extrabold mt-1">Dodaj eatmi.pl do ekranu gÅ‚Ã³wnego</h3>
                <p className="mt-1 text-sm text-gray-600">
                  DziÄ™ki temu zamÃ³wisz lunch boxa jak z aplikacji â€” 1 klik z ekranu telefonu.
                </p>

                <div className="mt-4 text-sm text-gray-800 space-y-2">
                  {isIOS && (
                    <>
                      <p className="font-semibold">Na iPhonie / iPadzie (Safari):</p>
                      <ol className="list-decimal list-inside space-y-1 text-sm">
                        <li>Dotknij <b>UdostÄ™pnij</b>.</li>
                        <li>Wybierz <b>â€žDodaj do ekranu poczÄ…tkowegoâ€</b>.</li>
                        <li>PotwierdÅº <b>Dodaj</b>.</li>
                      </ol>
                    </>
                  )}

                  {isAndroid && (
                    <>
                      <p className="font-semibold">Na Androidzie (Chrome):</p>
                      <ol className="list-decimal list-inside space-y-1 text-sm">
                        <li>Dotknij menu <b>â‹®</b>.</li>
                        <li>Wybierz <b>â€žDodaj do ekranu gÅ‚Ã³wnegoâ€</b>.</li>
                      </ol>
                    </>
                  )}

                  {!isIOS && !isAndroid && (
                    <>
                      <p className="font-semibold">Na swoim urzÄ…dzeniu mobilnym:</p>
                      <ol className="list-decimal list-inside space-y-1 text-sm">
                        <li>OtwÃ³rz menu przeglÄ…darki.</li>
                        <li>Wybierz <b>â€žDodaj do ekranu gÅ‚Ã³wnegoâ€</b>.</li>
                      </ol>
                    </>
                  )}
                </div>
              </div>
            </div>

            <div className="mt-5 flex flex-col sm:flex-row gap-3 sm:justify-end">
              <button type="button" onClick={onClose} className="w-full sm:w-auto px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-semibold text-gray-700 bg-white">
                Nie teraz
              </button>
              <button type="button" onClick={handleAddNow} className="w-full sm:w-auto px-4 py-2.5 rounded-xl bg-gray-900 text-white text-sm font-semibold">
                PokaÅ¼ pasek i dodaj
              </button>
            </div>
          </div>
        </div>
      );
    };

    const Router = () => {
      const [route, setRoute] = useState(window.location.hash || '#/');
      useEffect(()=>{
        const onHash = () => setRoute(window.location.hash || '#/');
        window.addEventListener('hashchange', onHash);
        return ()=> window.removeEventListener('hashchange', onHash);
      },[]);
      useEffect(()=> { lucide.createIcons(); }, [route]);

      if (route.startsWith('#/kategoria/')) {
        const id = route.split('/')[2];
        return <CategoryPage categoryId={id} />;
      }
      if(route === '#/koszyk') return <Koszyk />
      if(route === '#/zamowienie') return <Zamowienie />
      return <Home />
    }

    const App = () => {
      const [authOpen, setAuthOpen] = useState(false);
      const [a2hsOpen, setA2hsOpen] = useState(false);
      const [platform, setPlatform] = useState({ type: 'other', browser: 'other' });

      useEffect(() => { lucide.createIcons(); }, [authOpen]);

      useEffect(() => {
        if (!isMobileDevice()) return;
        try {
          const dismissed = JSON.parse(localStorage.getItem('eatmi-a2hs-dismissed') || 'false');
          if (dismissed) return;
        } catch {}

        const detected = detectPlatform();
        setPlatform(detected);

        const t = setTimeout(() => setA2hsOpen(true), 2500);
        return () => clearTimeout(t);
      }, []);

      const handleCloseA2hs = () => {
        setA2hsOpen(false);
        try { localStorage.setItem('eatmi-a2hs-dismissed', 'true'); } catch {}
      };

      return (
        <ToastProvider>
          <CartProvider>
            <Header onOpenAuth={() => setAuthOpen(true)} />
            <Router />
            <FloatingNav />
            <footer className="py-16 text-center text-sm text-gray-500">
              Â© {new Date().getFullYear()} eatmi.pl â€¢ Wszystkie prawa zastrzeÅ¼one
            </footer>

            <AuthModal open={authOpen} onClose={() => setAuthOpen(false)} />
            <AddToHomePrompt open={a2hsOpen} onClose={handleCloseA2hs} platform={platform} />
          </CartProvider>
        </ToastProvider>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
